<section class="product-details">
  <div class="container">
    <div class="product-description">
      {%- for block in section.blocks -%}
        {%- case block.type -%}
            {%- comment -%}
              --------------------------------------------------------------------------------------
              DESCRIPTION
              --------------------------------------------------------------------------------------
            {%- endcomment -%}

          {%- when 'description' -%}
            {%- if product.description != blank
              or product.metafields.my_fields.arctic_grey_file_metafield != blank
              or product.metafields.my_fields.specifications_sheet != blank
            -%}
              <div
                class="product-block-list__item product-block-list__item--description"
                {{ block.shopify_attributes }}
              >
                <div class="card">
                  {%- if block.settings.display_mode == 'collapse' -%}
                    <button
                      class="card__collapsible-button"
                      data-action="toggle-collapsible"
                      aria-expanded="false"
                      aria-controls="block-{{ section.id }}-{{ block.id }}"
                    >
                      <span class="card__title heading h3">Product {{ 'product.general.description' | t }}</span>
                      <span class="plus-button plus-button--large"></span>
                    </button>

                    <div id="block-{{ section.id }}-{{ block.id }}" class="card__collapsible">
                      <div class="card__collapsible-content">
                        <div class="rte text--pull">
                          {{ product.description | remove: 'data-section-type="product"' }}
                        </div>
                      </div>
                    </div>
                  {%- else -%}
                    <div class="card__header">
                      <h2 class="card__title heading h3">{{ 'product.general.description' | t }}</h2>
                    </div>

                    <div
                      class="card__section {% if block.settings.display_mode == 'view_more' %}expandable-content{% endif %}"
                      {% if block.settings.display_mode == 'view_more' %}
                        aria-expanded="false"
                      {% endif %}
                    >
                      <div class="rte text--pull">
                        {{ product.description | remove: 'data-section-type="product"' }}
                      </div>

                      {%- if block.settings.display_mode == 'view_more' -%}
                        <button class="expandable-content__toggle">
                          <span class="expandable-content__toggle-icon"></span>
                          <span
                            class="expandable-content__toggle-text"
                            data-view-more="{{ 'product.general.view_more' | t | escape }}"
                            data-view-less="{{ 'product.general.view_less' | t | escape }}"
                          >
                            {{- 'product.general.view_more' | t -}}
                          </span>
                        </button>
                      {%- endif -%}
                      {%- if product.metafields.my_fields.arctic_grey_file_metafield != blank
                        or product.metafields.my_fields.specifications_sheet != blank
                      -%}
                        <div class="rte text--pull">
                          <div id="shopify-produect-manual" class="produect-manual ">
                            <strong>Download Specs Sheet:</strong>
                            {%- render 'icon', icon: section.settings.icon, stroke_width: 1.5 -%}
                            {%- if product.metafields.my_fields.arctic_grey_file_metafield != blank -%}
                              {% assign filenamewithversion = product.metafields.my_fields.arctic_grey_file_metafield
                                | file_url
                                | split: '/'
                                | last
                              %}
                              <a
                                href="{{ product.metafields.my_fields.arctic_grey_file_metafield  | file_url }}"
                                target="_blank"
                                download
                              >
                                {{- filenamewithversion | split: '?' | first }} ( Download Here )</a
                              >
                              <br>
                            {%- endif -%}

                            {%- if product.metafields.my_fields.specifications_sheet != blank -%}
                              {% assign filenamewithversion = product.metafields.my_fields.specifications_sheet
                                | file_url
                                | split: '/'
                                | last
                              %}
                              <a
                                href="{{ product.metafields.my_fields.specifications_sheet  | file_url }}"
                              >
                                {{- filenamewithversion | split: '?' | first }} ( Download Here )</a
                              >
                            {%- endif -%}
                          </div>
                        </div>
                      {%- endif -%}
                    </div>
                  {%- endif -%}
                </div>
              </div>
            {%- endif -%}
          {%- when 'content' -%}
            {%- comment -%}
              --------------------------------------------------------------------------------------
              CONTENT (we first check the page and then inline content)
              --------------------------------------------------------------------------------------
            {%- endcomment -%}

            {%- assign page = block.settings.page -%}

            {%- if page != blank -%}
              {%- assign title = page.title -%}
              {%- assign content = page.content -%}
            {%- else -%}
              {%- assign title = block.settings.title -%}
              {%- assign content = block.settings.content -%}
            {%- endif -%}

            {%- if title != blank and content != blank -%}
              <div class="product-block-list__item product-block-list__item--content" {{ block.shopify_attributes }}>
                <div class="card">
                  {%- if block.settings.display_mode == 'collapse' -%}
                    <button
                      class="card__collapsible-button"
                      data-action="toggle-collapsible"
                      aria-expanded="false"
                      aria-controls="block-{{ section.id }}-{{ block.id }}"
                    >
                      <span class="card__title heading h3">{{ title }}</span>
                      <span class="plus-button plus-button--large"></span>
                    </button>

                    <div id="block-{{ section.id }}-{{ block.id }}" class="card__collapsible">
                      <div class="card__collapsible-content">
                        <div class="rte text--pull">
                          {{ content }}
                        </div>
                      </div>
                    </div>
                  {%- else -%}
                    <div class="card__header">
                      <h2 class="card__title heading h3">{{ title }}</h2>
                    </div>

                    <div
                      class="card__section {% if block.settings.display_mode == 'view_more' %}expandable-content{% endif %}"
                      {% if block.settings.display_mode == 'view_more' %}
                        aria-expanded="false"
                      {% endif %}
                    >
                      <div class="rte text--pull">
                        {{ content }}
                      </div>

                      {%- if block.settings.display_mode == 'view_more' -%}
                        <button class="expandable-content__toggle">
                          <span class="expandable-content__toggle-icon"></span>
                          <span
                            class="expandable-content__toggle-text"
                            data-view-more="{{ 'product.general.view_more' | t | escape }}"
                            data-view-less="{{ 'product.general.view_less' | t | escape }}"
                          >
                            {{- 'product.general.view_more' | t -}}
                          </span>
                        </button>
                      {%- endif -%}
                    </div>
                  {%- endif -%}
                </div>
              </div>
            {%- endif -%}
        {% endcase %}
      {% endfor %}
    </div>
  </div>
</section>
<style>
  .card__collapsible-button .plus-button {
    color: #d90000;
  }
  .produect-manual svg {
    margin: 0 10px;
  }
  .produect-manual a {
    font-weight: 400;
    font-size: 16px;
    line-height: 29px;
    text-decoration-line: underline;
    color: #d90000;
  }
</style>
{% schema %}
{
  "name": "Product Details",
  "settings": [
    {
      "type": "select",
      "id": "icon",
      "label": "Icon",
      "options": [
        { "value": "bi-download", "label": "File download", "group": "Shop" },
        { "value": "bi-gift-wrap", "label": "Gift wrap", "group": "Shop" },
        { "value": "bi-gift-box", "label": "Gift box", "group": "Shop" },
        { "value": "bi-heart", "label": "Heart", "group": "Shop" },
        { "value": "bi-ecology", "label": "Ecology", "group": "Shop" },
        { "value": "bi-plant", "label": "Plant", "group": "Shop" },
        { "value": "bi-shop", "label": "Shop", "group": "Shop" },
        { "value": "bi-shop-pin", "label": "Shop with pin", "group": "Shop" },
        { "value": "bi-alert", "label": "Alert", "group": "Communication" },
        { "value": "bi-chat", "label": "Chat", "group": "Communication" },
        { "value": "bi-comment", "label": "Comment", "group": "Communication" },
        { "value": "bi-customer-support", "label": "Customer support", "group": "Communication" },
        { "value": "bi-email", "label": "Email", "group": "Communication" },
        { "value": "bi-network", "label": "Network", "group": "Communication" },
        { "value": "bi-newsletter", "label": "Newsletter", "group": "Communication" },
        { "value": "bi-love", "label": "Love", "group": "Communication" },
        { "value": "bi-phone", "label": "Phone", "group": "Communication" },
        { "value": "bi-share", "label": "Share", "group": "Communication" },
        { "value": "bi-delivery", "label": "Delivery", "group": "Delivery" },
        { "value": "bi-fast-delivery", "label": "Fast delivery", "group": "Delivery" },
        { "value": "bi-returns", "label": "Returns", "group": "Delivery" },
        { "value": "bi-time", "label": "Time", "group": "Delivery" },
        { "value": "bi-secure-payment", "label": "Secure payment", "group": "Security" },
        { "value": "bi-mobile-payment", "label": "Mobile payment", "group": "Security" },
        { "value": "bi-computer-payment", "label": "Computer payment", "group": "Security" },
        { "value": "bi-credit-card", "label": "Credit card", "group": "Security" },
        { "value": "bi-shield", "label": "Shield", "group": "Security" }
      ],
      "default": "bi-download"
    }
  ],
  "blocks": [
    {
      "type": "description",
      "name": "Description",
      "limit": 1,
      "settings": [
        {
          "type": "select",
          "id": "display_mode",
          "label": "Display mode",
          "options": [
            {
              "value": "collapse",
              "label": "Collapse"
            },
            {
              "value": "view_more",
              "label": "Show view more if long"
            },
            {
              "value": "show_all",
              "label": "Show all"
            }
          ],
          "default": "show_all"
        }
      ]
    },
    {
      "type": "content",
      "name": "Content",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Content"
        },
        {
          "type": "page",
          "id": "page",
          "label": "Content from page",
          "info": "If specified, takes precedence over inline content."
        },
        {
          "type": "select",
          "id": "display_mode",
          "label": "Display mode",
          "options": [
            {
              "value": "collapse",
              "label": "Collapse"
            },
            {
              "value": "view_more",
              "label": "Show view more if long"
            },
            {
              "value": "show_all",
              "label": "Show all"
            }
          ],
          "default": "show_all"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Product Details",
      "category": "Product",
      "blocks": [{ "type": "description" }]
    }
  ]
}
{% endschema %}
